<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UtiLite: include/utilite/UMath.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">UtiLite
   &#160;<span id="projectnumber">0.3.1</span>
   </div>
   <div id="projectbrief">A lite utilities library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">include/utilite/UMath.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_u_math_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">*  utilite is a cross-platform library with</span>
<a name="l00003"></a>00003 <span class="comment">*  useful utilities for fast and small developing.</span>
<a name="l00004"></a>00004 <span class="comment">*  Copyright (C) 2010  Mathieu Labbe</span>
<a name="l00005"></a>00005 <span class="comment">*</span>
<a name="l00006"></a>00006 <span class="comment">*  utilite is free library: you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment">*  it under the terms of the GNU Lesser General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment">*  the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment">*  (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment">*</span>
<a name="l00011"></a>00011 <span class="comment">*  utilite is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">*  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment">*  GNU Lesser General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment">*</span>
<a name="l00016"></a>00016 <span class="comment">*  You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00017"></a>00017 <span class="comment">*  along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef UMATH_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define UMATH_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;utilite/UtiLiteExp.h&quot;</span> <span class="comment">// DLL export/import defines</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#ifdef APPLE</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">        #define ISNAN(value) std::isnan(value)</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#elif _MSC_VER</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">        #define ISNAN(value) _isnan(value)</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">        #undef min  </span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">        #undef max </span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">        #define ISNAN(value) isnan(value)</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00051"></a><a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">00051</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; index)
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053         T max = 0;
<a name="l00054"></a>00054         index = 0;
<a name="l00055"></a>00055         <span class="keywordflow">if</span>(!v || size == 0)
<a name="l00056"></a>00056         {
<a name="l00057"></a>00057                 <span class="keywordflow">return</span> max;
<a name="l00058"></a>00058         }
<a name="l00059"></a>00059         max = v[0];
<a name="l00060"></a>00060         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=1; i&lt;size; ++i)
<a name="l00061"></a>00061         {
<a name="l00062"></a>00062                 <span class="keywordflow">if</span>(ISNAN(max) || (max &lt; v[i] &amp;&amp; !ISNAN(v[i])))
<a name="l00063"></a>00063                 {
<a name="l00064"></a>00064                         max = v[i];
<a name="l00065"></a>00065                         index = i;
<a name="l00066"></a>00066                 }
<a name="l00067"></a>00067         }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069         <span class="keywordflow">return</span> max;
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 
<a name="l00078"></a>00078 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00079"></a><a class="code" href="_u_math_8h.html#a429cc62f1ca3c7a00e0062301ae60bcc">00079</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; index)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(v.data(), v-&gt;size(), index);
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00090"></a>00090 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00091"></a><a class="code" href="_u_math_8h.html#a387b43468da220548d025010be075476">00091</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index;
<a name="l00094"></a>00094         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(v, size, index);
<a name="l00095"></a>00095 }
<a name="l00096"></a>00096 
<a name="l00102"></a>00102 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00103"></a><a class="code" href="_u_math_8h.html#a0aef304a0891fafcef581dcfbf3ac792">00103</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a1362990d0ce7f09ef735292cc480fa23">uMax</a>(v.data(), v.size());
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00115"></a>00115 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00116"></a><a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">00116</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; index)
<a name="l00117"></a>00117 {
<a name="l00118"></a>00118         T min = 0;
<a name="l00119"></a>00119         index = 0;
<a name="l00120"></a>00120         <span class="keywordflow">if</span>(!v || size == 0)
<a name="l00121"></a>00121         {
<a name="l00122"></a>00122                 <span class="keywordflow">return</span> min;
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124         min = v[0];
<a name="l00125"></a>00125         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=1; i&lt;size; ++i)
<a name="l00126"></a>00126         {
<a name="l00127"></a>00127                 <span class="keywordflow">if</span>(ISNAN(min) || (min &gt; v[i] &amp;&amp; !ISNAN(v[i])))
<a name="l00128"></a>00128                 {
<a name="l00129"></a>00129                         min = v[i];
<a name="l00130"></a>00130                         index = i;
<a name="l00131"></a>00131                 }
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134         <span class="keywordflow">return</span> min;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00143"></a>00143 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00144"></a><a class="code" href="_u_math_8h.html#a99bd3bc365630c1760432cf810ea5831">00144</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; index)
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(v.data(), v.size(), index);
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00155"></a>00155 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00156"></a><a class="code" href="_u_math_8h.html#a68e11ea992520b98d4e688f8853b5dc4">00156</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00157"></a>00157 {
<a name="l00158"></a>00158         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index;
<a name="l00159"></a>00159         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(v, size, index);
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00167"></a>00167 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00168"></a><a class="code" href="_u_math_8h.html#aeb0652d64e72d115d751f8186ac9016e">00168</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00169"></a>00169 {
<a name="l00170"></a>00170         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#aa37a66d04825a8834648dbe931bd57e6">uMin</a>(v.data(), v.size());
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00182"></a>00182 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00183"></a><a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">00183</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, T &amp; min, T &amp; max, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; indexMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; indexMax)
<a name="l00184"></a>00184 {
<a name="l00185"></a>00185         min = 0;
<a name="l00186"></a>00186         max = 0;
<a name="l00187"></a>00187         indexMin = 0;
<a name="l00188"></a>00188         indexMax = 0;
<a name="l00189"></a>00189         <span class="keywordflow">if</span>(!v || size == 0)
<a name="l00190"></a>00190         {
<a name="l00191"></a>00191                 <span class="keywordflow">return</span>;
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193         min = v[0];
<a name="l00194"></a>00194         max = v[0];
<a name="l00195"></a>00195 
<a name="l00196"></a>00196         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=1; i&lt;size; ++i)
<a name="l00197"></a>00197         {
<a name="l00198"></a>00198                 <span class="keywordflow">if</span>(ISNAN(min) || (min &gt; v[i] &amp;&amp; !ISNAN(v[i])))
<a name="l00199"></a>00199                 {
<a name="l00200"></a>00200                         min = v[i];
<a name="l00201"></a>00201                         indexMin = i;
<a name="l00202"></a>00202                 }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204                 <span class="keywordflow">if</span>(ISNAN(max) || (max &lt; v[i] &amp;&amp; !ISNAN(v[i])))
<a name="l00205"></a>00205                 {
<a name="l00206"></a>00206                         max = v[i];
<a name="l00207"></a>00207                         indexMax = i;
<a name="l00208"></a>00208                 }
<a name="l00209"></a>00209         }
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00220"></a>00220 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00221"></a><a class="code" href="_u_math_8h.html#a23b93249fbe3eebc9d95104f4f8cafff">00221</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, T &amp; min, T &amp; max, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; indexMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; indexMax)
<a name="l00222"></a>00222 {
<a name="l00223"></a>00223         <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(v.data(), v.size(), min, max, indexMin, indexMax);
<a name="l00224"></a>00224 }
<a name="l00225"></a>00225 
<a name="l00233"></a>00233 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00234"></a><a class="code" href="_u_math_8h.html#a9cc051a73d402e69919d8fcea51c3098">00234</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, T &amp; min, T &amp; max)
<a name="l00235"></a>00235 {
<a name="l00236"></a>00236         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> indexMin;
<a name="l00237"></a>00237         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> indexMax;
<a name="l00238"></a>00238         <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(v, size, min, max, indexMin, indexMax);
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00247"></a>00247 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00248"></a><a class="code" href="_u_math_8h.html#af5f7ebda9d440043cd3c57037e81318b">00248</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, T &amp; min, T &amp; max)
<a name="l00249"></a>00249 {
<a name="l00250"></a>00250         <a class="code" href="_u_math_8h.html#af9bfdafb6da16f9c6f4691a6d951538b">uMinMax</a>(v.data(), v.size(), min, max);
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00258"></a>00258 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00259"></a><a class="code" href="_u_math_8h.html#a6e100ed2031a529679a93b9b4bf818af">00259</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_u_math_8h.html#a6e100ed2031a529679a93b9b4bf818af">uSign</a>(<span class="keyword">const</span> T &amp; v)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261         <span class="keywordflow">if</span>(v &lt; 0)
<a name="l00262"></a>00262         {
<a name="l00263"></a>00263                 <span class="keywordflow">return</span> -1;
<a name="l00264"></a>00264         }
<a name="l00265"></a>00265         <span class="keywordflow">else</span>
<a name="l00266"></a>00266         {
<a name="l00267"></a>00267                 <span class="keywordflow">return</span> 1;
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00276"></a>00276 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00277"></a><a class="code" href="_u_math_8h.html#a81a1c24c0229e6c4dc8d8e09497ad114">00277</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a81a1c24c0229e6c4dc8d8e09497ad114">uSum</a>(<span class="keyword">const</span> std::list&lt;T&gt; &amp; list)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279         T sum = 0;
<a name="l00280"></a>00280         <span class="keywordflow">for</span>(<span class="keyword">typename</span> std::list&lt;T&gt;::const_iterator i=list.begin(); i!=list.end(); ++i)
<a name="l00281"></a>00281         {
<a name="l00282"></a>00282                 sum += *i;
<a name="l00283"></a>00283         }
<a name="l00284"></a>00284         <span class="keywordflow">return</span> sum;
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00293"></a>00293 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00294"></a><a class="code" href="_u_math_8h.html#a86599e95ecdc91ce2d9497985d5d642b">00294</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a81a1c24c0229e6c4dc8d8e09497ad114">uSum</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00295"></a>00295 {
<a name="l00296"></a>00296         T sum = 0;
<a name="l00297"></a>00297         <span class="keywordflow">if</span>(v &amp;&amp; size)
<a name="l00298"></a>00298         {
<a name="l00299"></a>00299                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;size; ++i)
<a name="l00300"></a>00300                 {
<a name="l00301"></a>00301                         sum += v[i];
<a name="l00302"></a>00302                 }
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304         <span class="keywordflow">return</span> sum;
<a name="l00305"></a>00305 }
<a name="l00306"></a>00306 
<a name="l00312"></a>00312 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00313"></a><a class="code" href="_u_math_8h.html#af15f0fa694931f0f99ba640d52539b09">00313</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a81a1c24c0229e6c4dc8d8e09497ad114">uSum</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00314"></a>00314 {
<a name="l00315"></a>00315         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a81a1c24c0229e6c4dc8d8e09497ad114">uSum</a>(v.data(), v.size());
<a name="l00316"></a>00316 }
<a name="l00317"></a>00317 
<a name="l00325"></a>00325 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00326"></a><a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">00326</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, T subtract = T())
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328         T sum = 0;
<a name="l00329"></a>00329         <span class="keywordflow">if</span>(v &amp;&amp; size)
<a name="l00330"></a>00330         {
<a name="l00331"></a>00331                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;size; ++i)
<a name="l00332"></a>00332                 {
<a name="l00333"></a>00333                         sum += (v[i]-subtract)*(v[i]-subtract);
<a name="l00334"></a>00334                 }
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336         <span class="keywordflow">return</span> sum;
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00345"></a>00345 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00346"></a><a class="code" href="_u_math_8h.html#a94be0f1c509db2f294048e6d5b16a522">00346</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, T subtract = T())
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(v.data(), v.size(), subtract);
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00357"></a>00357 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00358"></a><a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">00358</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00359"></a>00359 {
<a name="l00360"></a>00360         T buf = 0;
<a name="l00361"></a>00361         <span class="keywordflow">if</span>(v &amp;&amp; size)
<a name="l00362"></a>00362         {
<a name="l00363"></a>00363                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;size; ++i)
<a name="l00364"></a>00364                 {
<a name="l00365"></a>00365                         buf += v[i];
<a name="l00366"></a>00366                 }
<a name="l00367"></a>00367                 buf /= size;
<a name="l00368"></a>00368         }
<a name="l00369"></a>00369         <span class="keywordflow">return</span> buf;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00377"></a>00377 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00378"></a><a class="code" href="_u_math_8h.html#aa4e1e6cf3df49d68d95bbe9981d1600e">00378</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(<span class="keyword">const</span> std::list&lt;T&gt; &amp; list)
<a name="l00379"></a>00379 {
<a name="l00380"></a>00380         T m = 0;
<a name="l00381"></a>00381         <span class="keywordflow">if</span>(list.size())
<a name="l00382"></a>00382         {
<a name="l00383"></a>00383                 <span class="keywordflow">for</span>(<span class="keyword">typename</span> std::list&lt;T&gt;::const_iterator i=list.begin(); i!=list.end(); ++i)
<a name="l00384"></a>00384                 {
<a name="l00385"></a>00385                         m += *i;
<a name="l00386"></a>00386                 }
<a name="l00387"></a>00387                 m /= list.size();
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         <span class="keywordflow">return</span> m;
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00397"></a>00397 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00398"></a><a class="code" href="_u_math_8h.html#a8c8cd8ce7b3d8f32847bb57e9f73a625">00398</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(v.data(), v.size());
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00411"></a>00411 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00412"></a><a class="code" href="_u_math_8h.html#a28770817787def2a9165ed070fa17a54">00412</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a28770817787def2a9165ed070fa17a54">uMeanSquaredError</a>(<span class="keyword">const</span> T * x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeX, <span class="keyword">const</span> T * y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeY)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414         T sum = 0;
<a name="l00415"></a>00415         <span class="keywordflow">if</span>(x &amp;&amp; y &amp;&amp; sizeX == sizeY)
<a name="l00416"></a>00416         {
<a name="l00417"></a>00417                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sizeX; ++i)
<a name="l00418"></a>00418                 {
<a name="l00419"></a>00419                         T diff = x[i]-y[i];
<a name="l00420"></a>00420                         sum += diff*diff;
<a name="l00421"></a>00421                 }
<a name="l00422"></a>00422                 <span class="keywordflow">return</span> sum/(T)sizeX;
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424         <span class="keywordflow">return</span> (T)-1;
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00433"></a>00433 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00434"></a><a class="code" href="_u_math_8h.html#a319bcffddfeab66d5cbb729fa56dd361">00434</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a28770817787def2a9165ed070fa17a54">uMeanSquaredError</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; x, <span class="keyword">const</span> std::vector&lt;T&gt; &amp; y)
<a name="l00435"></a>00435 {
<a name="l00436"></a>00436         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a28770817787def2a9165ed070fa17a54">uMeanSquaredError</a>(x.data(), x.size(), y.data(), y.size());
<a name="l00437"></a>00437 }
<a name="l00438"></a>00438 
<a name="l00447"></a>00447 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00448"></a><a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">00448</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, T meanV)
<a name="l00449"></a>00449 {
<a name="l00450"></a>00450         T buf = 0;
<a name="l00451"></a>00451         <span class="keywordflow">if</span>(v &amp;&amp; size&gt;1)
<a name="l00452"></a>00452         {
<a name="l00453"></a>00453                 <span class="keywordtype">float</span> sum = 0;
<a name="l00454"></a>00454                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;size; ++i)
<a name="l00455"></a>00455                 {
<a name="l00456"></a>00456                         sum += (v[i]-meanV)*(v[i]-meanV);
<a name="l00457"></a>00457                 }
<a name="l00458"></a>00458                 buf = sqrt(sum/(size-1));
<a name="l00459"></a>00459         }
<a name="l00460"></a>00460         <span class="keywordflow">return</span> buf;
<a name="l00461"></a>00461 }
<a name="l00462"></a>00462 
<a name="l00470"></a>00470 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00471"></a><a class="code" href="_u_math_8h.html#a5d4dbe801e8e1c2cc2066074fe57913f">00471</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(<span class="keyword">const</span> std::list&lt;T&gt; &amp; list, <span class="keyword">const</span> T &amp; m)
<a name="l00472"></a>00472 {
<a name="l00473"></a>00473         T buf = 0;
<a name="l00474"></a>00474         <span class="keywordflow">if</span>(list.size()&gt;1)
<a name="l00475"></a>00475         {
<a name="l00476"></a>00476                 <span class="keywordtype">float</span> sum = 0;
<a name="l00477"></a>00477                 <span class="keywordflow">for</span>(<span class="keyword">typename</span> std::list&lt;T&gt;::const_iterator i=list.begin(); i!=list.end(); ++i)
<a name="l00478"></a>00478                 {
<a name="l00479"></a>00479                         sum += (*i-m)*(*i-m);
<a name="l00480"></a>00480                 }
<a name="l00481"></a>00481                 buf = sqrt(sum/(list.size()-1));
<a name="l00482"></a>00482         }
<a name="l00483"></a>00483         <span class="keywordflow">return</span> buf;
<a name="l00484"></a>00484 }
<a name="l00485"></a>00485 
<a name="l00492"></a>00492 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00493"></a><a class="code" href="_u_math_8h.html#a7cf5490c0e59d4de49920b46cf4b65e9">00493</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00494"></a>00494 {
<a name="l00495"></a>00495         T m = <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(v, size);
<a name="l00496"></a>00496         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(v, size, m);
<a name="l00497"></a>00497 }
<a name="l00498"></a>00498 
<a name="l00506"></a>00506 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00507"></a><a class="code" href="_u_math_8h.html#a8cf0e1e59be999ff79da8217d1617b5b">00507</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v, <span class="keyword">const</span> T &amp; m)
<a name="l00508"></a>00508 {
<a name="l00509"></a>00509         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a96c8eedf74b3565533407d55ddbc0e09">uStdDev</a>(v.data(), v.size(), m);
<a name="l00510"></a>00510 }
<a name="l00511"></a>00511 
<a name="l00516"></a>00516 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00517"></a><a class="code" href="_u_math_8h.html#ab5e611c29307d8733cfaebc68bed1ac6">00517</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#ab5e611c29307d8733cfaebc68bed1ac6">uNorm</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00518"></a>00518 {
<a name="l00519"></a>00519         <span class="keywordtype">float</span> sum = 0.0f;
<a name="l00520"></a>00520         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;v.size(); ++i)
<a name="l00521"></a>00521         {
<a name="l00522"></a>00522                 sum += v[i]*v[i];
<a name="l00523"></a>00523         }
<a name="l00524"></a>00524         <span class="keywordflow">return</span> std::sqrt(sum);
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00531"></a>00531 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00532"></a><a class="code" href="_u_math_8h.html#a6ea84f5e66d07e1742ab12dccc7a9bc1">00532</a> <span class="keyword">inline</span> std::vector&lt;T&gt; <a class="code" href="_u_math_8h.html#a6ea84f5e66d07e1742ab12dccc7a9bc1">uNormalize</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534         <span class="keywordtype">float</span> norm = <a class="code" href="_u_math_8h.html#ab5e611c29307d8733cfaebc68bed1ac6">uNorm</a>(v);
<a name="l00535"></a>00535         <span class="keywordflow">if</span>(norm == 0)
<a name="l00536"></a>00536         {
<a name="l00537"></a>00537                 <span class="keywordflow">return</span> v;
<a name="l00538"></a>00538         }
<a name="l00539"></a>00539         <span class="keywordflow">else</span>
<a name="l00540"></a>00540         {
<a name="l00541"></a>00541                 std::vector&lt;T&gt; r(v.size());
<a name="l00542"></a>00542                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;v.size(); ++i)
<a name="l00543"></a>00543                 {
<a name="l00544"></a>00544                         r[i] = v[i]/norm;
<a name="l00545"></a>00545                 }
<a name="l00546"></a>00546                 <span class="keywordflow">return</span> r;
<a name="l00547"></a>00547         }
<a name="l00548"></a>00548 }
<a name="l00549"></a>00549 
<a name="l00553"></a>00553 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00554"></a><a class="code" href="_u_math_8h.html#a563c3c8da18d39184cc1ea1956ca29a8">00554</a> <span class="keyword">inline</span> std::list&lt;unsigned int&gt; <a class="code" href="_u_math_8h.html#a563c3c8da18d39184cc1ea1956ca29a8">uLocalMaxima</a>(<span class="keyword">const</span> T * v, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00555"></a>00555 {
<a name="l00556"></a>00556         std::list&lt;unsigned int&gt; maxima;
<a name="l00557"></a>00557         <span class="keywordflow">if</span>(size)
<a name="l00558"></a>00558         {
<a name="l00559"></a>00559                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;size; ++i)
<a name="l00560"></a>00560                 {
<a name="l00561"></a>00561                         <span class="keywordflow">if</span>(i == 0)
<a name="l00562"></a>00562                         {
<a name="l00563"></a>00563                                 <span class="comment">// first item</span>
<a name="l00564"></a>00564                                 <span class="keywordflow">if</span>((i+1 &lt; size &amp;&amp; v[i] &gt; v[i+1]) ||
<a name="l00565"></a>00565                                         i+1 &gt;= size)
<a name="l00566"></a>00566                                 {
<a name="l00567"></a>00567                                         maxima.push_back(i);
<a name="l00568"></a>00568                                 }
<a name="l00569"></a>00569                         }
<a name="l00570"></a>00570                         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == size - 1)
<a name="l00571"></a>00571                         {
<a name="l00572"></a>00572                                 <span class="comment">//last item</span>
<a name="l00573"></a>00573                                 <span class="keywordflow">if</span>((i &gt;= 1 &amp;&amp; v[i] &gt; v[i-1]) ||
<a name="l00574"></a>00574                                         i == 0)
<a name="l00575"></a>00575                                 {
<a name="l00576"></a>00576                                         maxima.push_back(i);
<a name="l00577"></a>00577                                 }
<a name="l00578"></a>00578                         }
<a name="l00579"></a>00579                         <span class="keywordflow">else</span>
<a name="l00580"></a>00580                         {
<a name="l00581"></a>00581                                 <span class="comment">//all others, check previous and next</span>
<a name="l00582"></a>00582                                 <span class="keywordflow">if</span>(v[i] &gt; v[i-1] &amp;&amp; v[i] &gt; v[i+1])
<a name="l00583"></a>00583                                 {
<a name="l00584"></a>00584                                         maxima.push_back(i);
<a name="l00585"></a>00585                                 }
<a name="l00586"></a>00586                         }
<a name="l00587"></a>00587                 }
<a name="l00588"></a>00588         }
<a name="l00589"></a>00589         <span class="keywordflow">return</span> maxima;
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00595"></a>00595 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00596"></a><a class="code" href="_u_math_8h.html#a744e7c4aafaea7b04bbb3460e26e6dee">00596</a> <span class="keyword">inline</span> std::list&lt;unsigned int&gt; <a class="code" href="_u_math_8h.html#a563c3c8da18d39184cc1ea1956ca29a8">uLocalMaxima</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; v)
<a name="l00597"></a>00597 {
<a name="l00598"></a>00598         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#a563c3c8da18d39184cc1ea1956ca29a8">uLocalMaxima</a>(v.data(), v.size());
<a name="l00599"></a>00599 }
<a name="l00600"></a>00600 
<a name="l00605"></a><a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">00605</a> <span class="keyword">enum</span> <a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">UXMatchMethod</a>{UXCorrRaw, UXCorrBiased, UXCorrUnbiased, UXCorrCoeff, UXCovRaw, UXCovBiased, UXCovUnbiased, UXCovCoeff};
<a name="l00606"></a>00606 
<a name="l00616"></a>00616 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00617"></a><a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">00617</a> <span class="keyword">inline</span> std::vector&lt;T&gt; <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(<span class="keyword">const</span> T * vA, <span class="keyword">const</span> T * vB, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeA, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeB, <a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">UXMatchMethod</a> method)
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619         <span class="keywordflow">if</span>(!vA || !vB || sizeA == 0 || sizeB == 0)
<a name="l00620"></a>00620         {
<a name="l00621"></a>00621                 <span class="keywordflow">return</span> std::vector&lt;T&gt;();
<a name="l00622"></a>00622         }
<a name="l00623"></a>00623 
<a name="l00624"></a>00624         std::vector&lt;T&gt; result(sizeA + sizeB - 1);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626         T meanA = 0;
<a name="l00627"></a>00627         T meanB = 0;
<a name="l00628"></a>00628         <span class="keywordflow">if</span>(method &gt; UXCorrCoeff)
<a name="l00629"></a>00629         {
<a name="l00630"></a>00630                 meanA = <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(vA, sizeA);
<a name="l00631"></a>00631                 meanB = <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(vB, sizeB);
<a name="l00632"></a>00632         }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634         T den = 1;
<a name="l00635"></a>00635         <span class="keywordflow">if</span>(method == UXCorrCoeff || method == UXCovCoeff)
<a name="l00636"></a>00636         {
<a name="l00637"></a>00637                 den = std::sqrt(<a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(vA, sizeA, meanA) * <a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(vB, sizeB, meanB));
<a name="l00638"></a>00638         }
<a name="l00639"></a>00639         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(method == UXCorrBiased || method == UXCovBiased)
<a name="l00640"></a>00640         {
<a name="l00641"></a>00641                 den = (T)std::max(sizeA, sizeB);
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643 
<a name="l00644"></a>00644         <span class="keywordflow">if</span>(sizeA == sizeB)
<a name="l00645"></a>00645         {
<a name="l00646"></a>00646                 T resultA;
<a name="l00647"></a>00647                 T resultB;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649                 <span class="keywordtype">int</span> posA;
<a name="l00650"></a>00650                 <span class="keywordtype">int</span> posB;
<a name="l00651"></a>00651                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653                 <span class="comment">// Optimization, filling two results at once</span>
<a name="l00654"></a>00654                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sizeA; ++i)
<a name="l00655"></a>00655                 {
<a name="l00656"></a>00656                         <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00657"></a>00657                         {
<a name="l00658"></a>00658                                 den = 0;
<a name="l00659"></a>00659                         }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661                         posA = sizeA - i - 1;
<a name="l00662"></a>00662                         posB = sizeB - i - 1;
<a name="l00663"></a>00663                         resultA = 0;
<a name="l00664"></a>00664                         resultB = 0;
<a name="l00665"></a>00665                         <span class="keywordflow">for</span>(j=0; (j + posB) &lt; sizeB &amp;&amp; (j + posA) &lt; sizeA; ++j)
<a name="l00666"></a>00666                         {
<a name="l00667"></a>00667                                 resultA += (vA[j] - meanA) * (vB[j + posB] - meanB);
<a name="l00668"></a>00668                                 resultB += (vA[j + posA] - meanA) * (vB[j] - meanB);
<a name="l00669"></a>00669                                 <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00670"></a>00670                                 {
<a name="l00671"></a>00671                                         ++den;
<a name="l00672"></a>00672                                 }
<a name="l00673"></a>00673                         }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675                         result[i] = resultA / den;
<a name="l00676"></a>00676                         result[result.size()-1 -i] = resultB / den;
<a name="l00677"></a>00677                 }
<a name="l00678"></a>00678         }
<a name="l00679"></a>00679         <span class="keywordflow">else</span>
<a name="l00680"></a>00680         {
<a name="l00681"></a>00681                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;result.size(); ++i)
<a name="l00682"></a>00682                 {
<a name="l00683"></a>00683                         <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00684"></a>00684                         {
<a name="l00685"></a>00685                                 den = 0;
<a name="l00686"></a>00686                         }
<a name="l00687"></a>00687 
<a name="l00688"></a>00688                         <span class="keywordtype">int</span> posB = sizeB - i - 1;
<a name="l00689"></a>00689                         T r = 0;
<a name="l00690"></a>00690                         <span class="keywordflow">if</span>(posB &gt;= 0)
<a name="l00691"></a>00691                         {
<a name="l00692"></a>00692                                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0; (j + posB) &lt; sizeB &amp;&amp; j &lt; sizeA; ++j)
<a name="l00693"></a>00693                                 {
<a name="l00694"></a>00694                                         r += (vA[j] - meanA) * (vB[j + posB] - meanB);
<a name="l00695"></a>00695                                         <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00696"></a>00696                                         {
<a name="l00697"></a>00697                                                 ++den;
<a name="l00698"></a>00698                                         }
<a name="l00699"></a>00699                                 }
<a name="l00700"></a>00700                         }
<a name="l00701"></a>00701                         <span class="keywordflow">else</span>
<a name="l00702"></a>00702                         {
<a name="l00703"></a>00703                                 <span class="keywordtype">int</span> posA = posB*-1;
<a name="l00704"></a>00704                                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; (i+posA) &lt; sizeA &amp;&amp; i &lt; sizeB; ++i)
<a name="l00705"></a>00705                                 {
<a name="l00706"></a>00706                                         r += (vA[i+posA] - meanA) * (vB[i] - meanB);
<a name="l00707"></a>00707                                         <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00708"></a>00708                                         {
<a name="l00709"></a>00709                                                 ++den;
<a name="l00710"></a>00710                                         }
<a name="l00711"></a>00711                                 }
<a name="l00712"></a>00712                         }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714                         result[i] = r / den;
<a name="l00715"></a>00715                 }
<a name="l00716"></a>00716         }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718         <span class="keywordflow">return</span> result;
<a name="l00719"></a>00719 }
<a name="l00720"></a>00720 
<a name="l00728"></a>00728 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00729"></a><a class="code" href="_u_math_8h.html#a8ff17a5d44f189e805c8108945c56328">00729</a> <span class="keyword">inline</span> std::vector&lt;T&gt; <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; vA, <span class="keyword">const</span> std::vector&lt;T&gt; &amp; vB, <a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">UXMatchMethod</a> method)
<a name="l00730"></a>00730 {
<a name="l00731"></a>00731         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(vA.data(), vB.data(), vA.size(), vB.size(), method);
<a name="l00732"></a>00732 }
<a name="l00733"></a>00733 
<a name="l00744"></a>00744 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00745"></a><a class="code" href="_u_math_8h.html#ac616ce0471d2e35fafd59d88021ccab3">00745</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(<span class="keyword">const</span> T * vA, <span class="keyword">const</span> T * vB, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeA, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeB, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">UXMatchMethod</a> method)
<a name="l00746"></a>00746 {
<a name="l00747"></a>00747         T result = 0;
<a name="l00748"></a>00748         <span class="keywordflow">if</span>(!vA || !vB || sizeA == 0 || sizeB == 0)
<a name="l00749"></a>00749         {
<a name="l00750"></a>00750                 <span class="keywordflow">return</span> result;
<a name="l00751"></a>00751         }
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         T meanA = 0;
<a name="l00754"></a>00754         T meanB = 0;
<a name="l00755"></a>00755         <span class="keywordflow">if</span>(method &gt; UXCorrCoeff)
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757                 meanA = <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(vA, sizeA);
<a name="l00758"></a>00758                 meanB = <a class="code" href="_u_math_8h.html#a7376638ab6047306c66a357153a47196">uMean</a>(vB, sizeB);
<a name="l00759"></a>00759         }
<a name="l00760"></a>00760         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = sizeA + sizeB - 1;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762         T den = 1;
<a name="l00763"></a>00763         <span class="keywordflow">if</span>(method == UXCorrCoeff || method == UXCovCoeff)
<a name="l00764"></a>00764         {
<a name="l00765"></a>00765                 den = std::sqrt(<a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(vA, sizeA, meanA) * <a class="code" href="_u_math_8h.html#aeb6a6517666687e509617e6bfaf274d3">uSumSquared</a>(vB, sizeB, meanB));
<a name="l00766"></a>00766         }
<a name="l00767"></a>00767         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(method == UXCorrBiased || method == UXCovBiased)
<a name="l00768"></a>00768         {
<a name="l00769"></a>00769                 den = (T)std::max(sizeA, sizeB);
<a name="l00770"></a>00770         }
<a name="l00771"></a>00771         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00772"></a>00772         {
<a name="l00773"></a>00773                 den = 0;
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775 
<a name="l00776"></a>00776         <span class="keywordflow">if</span>(index &lt; size)
<a name="l00777"></a>00777         {
<a name="l00778"></a>00778                 <span class="keywordtype">int</span> posB = sizeB - index - 1;
<a name="l00779"></a>00779                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00780"></a>00780                 <span class="keywordflow">if</span>(posB &gt;= 0)
<a name="l00781"></a>00781                 {
<a name="l00782"></a>00782                         <span class="keywordflow">for</span>(i=0; (i + posB) &lt; sizeB &amp;&amp; i &lt; sizeA; ++i)
<a name="l00783"></a>00783                         {
<a name="l00784"></a>00784                                 result += (vA[i] - meanA) * (vB[i + posB] - meanB);
<a name="l00785"></a>00785                                 <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00786"></a>00786                                 {
<a name="l00787"></a>00787                                         ++den;
<a name="l00788"></a>00788                                 }
<a name="l00789"></a>00789                         }
<a name="l00790"></a>00790                 }
<a name="l00791"></a>00791                 <span class="keywordflow">else</span>
<a name="l00792"></a>00792                 {
<a name="l00793"></a>00793                         <span class="keywordtype">int</span> posA = posB*-1;
<a name="l00794"></a>00794                         <span class="keywordflow">for</span>(i=0; (i+posA) &lt; sizeA &amp;&amp; i &lt; sizeB; ++i)
<a name="l00795"></a>00795                         {
<a name="l00796"></a>00796                                 result += (vA[i+posA] - meanA) * (vB[i] - meanB);
<a name="l00797"></a>00797                                 <span class="keywordflow">if</span>(method == UXCorrUnbiased || method == UXCovUnbiased)
<a name="l00798"></a>00798                                 {
<a name="l00799"></a>00799                                         ++den;
<a name="l00800"></a>00800                                 }
<a name="l00801"></a>00801                         }
<a name="l00802"></a>00802                 }
<a name="l00803"></a>00803         }
<a name="l00804"></a>00804         <span class="keywordflow">return</span> result / den;
<a name="l00805"></a>00805 }
<a name="l00806"></a>00806 
<a name="l00817"></a>00817 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00818"></a><a class="code" href="_u_math_8h.html#a726f4662efa078be30f5320bbb994c7a">00818</a> <span class="keyword">inline</span> T <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(<span class="keyword">const</span> std::vector&lt;T&gt; &amp; vA, <span class="keyword">const</span> std::vector&lt;T&gt; &amp; vB, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <a class="code" href="_u_math_8h.html#ae24d0d5b3a1d44ae8c5e50bb86a15cba">UXMatchMethod</a> method)
<a name="l00819"></a>00819 {
<a name="l00820"></a>00820         <span class="keywordflow">return</span> <a class="code" href="_u_math_8h.html#add2fd1c790156250fbf962bd4e77ca60">uXMatch</a>(vA.data(), vB.data(), vA.size(), vB.size(), index, method);
<a name="l00821"></a>00821 }
<a name="l00822"></a>00822 
<a name="l00828"></a><a class="code" href="_u_math_8h.html#a88a8b3e07142de28e445e43fd6a77c9b">00828</a> <span class="keyword">inline</span> std::vector&lt;float&gt; <a class="code" href="_u_math_8h.html#a88a8b3e07142de28e445e43fd6a77c9b">uHamming</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> L)
<a name="l00829"></a>00829 {
<a name="l00830"></a>00830         std::vector&lt;float&gt; w(L);
<a name="l00831"></a>00831         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N = L-1;
<a name="l00832"></a>00832         <span class="keywordtype">float</span> pi = 3.14159265f;
<a name="l00833"></a>00833         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;N; ++n)
<a name="l00834"></a>00834         {
<a name="l00835"></a>00835                 w[n] = 0.54f-0.46f*std::cos(2.0f*pi*<span class="keywordtype">float</span>(n)/<span class="keywordtype">float</span>(N));
<a name="l00836"></a>00836         }
<a name="l00837"></a>00837         <span class="keywordflow">return</span> w;
<a name="l00838"></a>00838 }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="preprocessor">#endif // UMATH_H</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 22 2013 10:03:34 for UtiLite by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
